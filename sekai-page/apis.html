<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NusaSekai Rest API</title>
    <style>
.container,body{overflow-x:auto}.category h2,.description p,body{margin:0}.container,.result{margin-top:20px}.button-38,h1{text-align:center}#apiKeyInfo,#currentApiKey,.button-38{font-family:"Inter var",ui-sans-serif,system-ui,-apple-system,system-ui,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}body{font-family:Arial,sans-serif;padding:0;background-color:#f4f4f4;display:flex;flex-direction:column;align-items:center;height:100vh}.container{width:80%;max-width:1200px;background:#fff;padding:20px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.1)}h1{color:#333}.category{margin-bottom:30px}.api-box{margin-bottom:20px;padding:15px;border:1px solid #ddd;border-radius:8px;background:#f9f9f9;box-shadow:0 0 5px rgba(0,0,0,.1);cursor:pointer;transition:background .3s,border-color .3s}.api-box.active{background:#fff;border-color:#007bff}.api-box h3{margin-top:0;margin-bottom:10px}.api-box:not(.active) .api-section,.checkbox-wrapper-35 .switch{display:none}.api-info .status,.api-info span{display:inline-block;margin-right:10px}.api-info{margin-bottom:10px;display:flex;align-items:center}.api-info span{font-weight:700}.api-info .status{width:10px;height:10px;border-radius:50%;background-color:#90ee90}.api-key-required{width:20px;height:auto;vertical-align:middle;margin-left:10px}.api-section label{display:block;margin-bottom:5px;font-weight:700}.api-section input[type=text],.api-section select,.popup input{width:calc(100% - 22px);padding:10px;margin-bottom:10px;border:1px solid #ddd;border-radius:4px}.api-section button{width:100%;padding:10px;border:none;border-radius:4px;background-color:#007bff;color:#fff;font-size:16px;cursor:pointer;margin-top:10px}.api-section button:hover{background-color:#0056b3}.result pre{background-color:#eee;padding:10px;border-radius:4px;white-space:pre-wrap;word-wrap:break-word}.button-38{background-color:#bfefff;border:0;border-radius:.5rem;box-sizing:border-box;color:#111827;font-size:.75rem;font-weight:600;line-height:1rem;padding:.5rem 1rem;box-shadow:0 1px 3px 0 rgba(0,0,0,.1),0 1px 2px 0 rgba(0,0,0,.06);cursor:pointer;user-select:none;-webkit-user-select:none;touch-action:manipulation}.button-38.unauthorized{background-color:#d41212;color:#fff;border:2px solid #d41212;box-shadow:0 0 8px rgba(212,18,18,.5)}.button-38.authorized{background-color:#28a745;color:#fff;border:2px solid #28a745;box-shadow:0 0 8px rgba(40,167,69,.5)}.button-38.authorized:hover{background-color:#218838}.button-38:hover,.popup .button-38:hover{background-color:#f9fafb}.button-38:focus,.popup .button-38:focus{outline:transparent solid 2px;outline-offset:2px}.button-38:focus-visible{box-shadow:none}.button-logo{padding:6px;font-size:14px;border-radius:5px;color:#725ac1;background:0 0;cursor:pointer;transition:.3s ease-out;border:1px solid #725ac1;box-shadow:inset 0 0 0 0 #725ac1,0 0 8px rgba(114,90,192,.6);display:flex;align-items:center;justify-content:center;position:relative;top:-10px}.loader-container,.popup{position:fixed;background:#fff}.button-logo.unauthorized{color:#d41212;border-color:#d41212;box-shadow:inset 0 0 0 0 #d41212,0 0 8px rgba(212,18,18,.6)}.button-logo.authorized{color:#28a745;border-color:#28a745;box-shadow:inset 0 0 0 0 #28a745,0 0 8px rgba(40,167,69,.6)}.button-logo img{width:24px;height:auto}.button-logo.unauthorized:hover{background:rgba(211,18,18,.1);box-shadow:inset 0 -100px 0 0 #d41212}.button-logo.authorized:hover{background:rgba(40,167,69,.1);box-shadow:inset 0 -100px 0 0 #28a745}#apiKeyInfo{margin-top:10px;padding:10px;background-color:#f9f9f9;border:1px solid #ddd;border-radius:4px;font-size:1rem;color:#333}#currentApiKey{font-weight:700;color:#007bff;word-wrap:break-word}.description{margin-top:5px;margin-bottom:20px;padding:10px;background-color:#fff;border-radius:4px;box-shadow:0 0 5px rgba(0,0,0,.1)}.popup{display:none;top:50%;left:50%;transform:translate(-50%,-50%);width:90%;max-width:400px;padding:20px;border-radius:8px;box-shadow:0 0 10px rgba(0,0,0,.2);z-index:1000;overflow-y:auto}.popup .button-38{width:100%;margin-top:10px}.popup .button-38:focus-visible{box-shadow:none}.checkbox-wrapper-35 .switch+label{-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;color:#78768d;cursor:pointer;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;font-family:'Helvetica Neue',Helvetica,Arial,sans-serif;font-size:12px;line-height:15px;position:relative;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.checkbox-wrapper-35 .switch+label::after,.checkbox-wrapper-35 .switch+label::before{content:'';display:block}.checkbox-wrapper-35 .switch+label::before{background-color:#05012c;border-radius:500px;height:15px;margin-right:8px;-webkit-transition:background-color 125ms ease-out;transition:background-color 125ms ease-out;width:25px}.checkbox-wrapper-35 .switch+label::after{background-color:#fff;border-radius:13px;box-shadow:0 3px 1px 0 rgba(37,34,71,.05),0 2px 2px 0 rgba(37,34,71,.1),0 3px 3px 0 rgba(37,34,71,.05);height:13px;left:1px;position:absolute;top:1px;-webkit-transition:-webkit-transform 125ms ease-out;transition:transform 125ms ease-out,-webkit-transform 125ms ease-out;width:13px}.checkbox-wrapper-35 .switch+label .switch-x-text{display:block;margin-right:.3em}.checkbox-wrapper-35 .switch+label .switch-x-toggletext{display:block;font-weight:700;height:15px;overflow:hidden;position:relative;width:40px}.checkbox-wrapper-35 .switch+label .switch-x-checked,.checkbox-wrapper-35 .switch+label .switch-x-unchecked{left:0;position:absolute;top:0;-webkit-transition:opacity 125ms ease-out,-webkit-transform 125ms ease-out;transition:transform 125ms ease-out,opacity 125ms ease-out,-webkit-transform 125ms ease-out}.checkbox-wrapper-35 .switch+label .switch-x-unchecked,.checkbox-wrapper-35 .switch:checked+label .switch-x-checked{opacity:1;-webkit-transform:none;transform:none}.checkbox-wrapper-35 .switch+label .switch-x-checked{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}.checkbox-wrapper-35 .switch+label .switch-x-hiddenlabel{position:absolute;visibility:hidden}.checkbox-wrapper-35 .switch:checked+label::before{background-color:#ffb500}.checkbox-wrapper-35 .switch:checked+label::after{-webkit-transform:translate3d(10px,0,0);transform:translate3d(10px,0,0)}.checkbox-wrapper-35 .switch:checked+label .switch-x-unchecked{opacity:0;-webkit-transform:translate3d(0,-100%,0);transform:translate3d(0,-100%,0)}body.dark-mode{background-color:#121212;color:#e0e0e0}body.dark-mode .container,body.dark-mode .popup{background:#1e1e1e;color:#e0e0e0}body.dark-mode .api-box{background:#2c2c2c;border-color:#444}body.dark-mode .api-info{color:#e0e0e0}body.dark-mode .description{background-color:#2c2c2c;color:#e0e0e0}body.dark-mode h1{color:#fff}body.dark-mode .api-section input[type=text],body.dark-mode .api-section select{background-color:#333;border-color:#444;color:#e0e0e0}body.dark-mode .api-section button{background-color:#555;color:#e0e0e0}body.dark-mode .api-section button:hover{background-color:#666}body.dark-mode #resultContainer{background-color:#2c2c2c}body.dark-mode #resultOutput{color:#fff;background-color:#1e1e1e;border:1px solid #444;padding:10px}.loader-container{top:0;left:0;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;z-index:9999;transition:opacity .5s}.loader-container.hidden{opacity:0;pointer-events:none}.loader{font-weight:700;font-family:Ubuntu,sans-serif;font-size:20px;color:#0000;background:linear-gradient(90deg,#000 calc(50% - .5ch),#c02942 0 calc(50% + .5ch),#000 0) right/calc(200% + 1ch) 100%;-webkit-background-clip:text;background-clip:text;animation:2s steps(11) infinite l8}.loading-text{font-size:5px;color:#666;margin-top:10px}.loader:before{content:"NusaSekai API's..."}@keyframes l8{to{background-position:left}}

.loader-container {
    position: fixed;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    display: none; /* Hidden by default */
    flex-direction: column;
    align-items: center;
    justify-content: center;
}

.loader {
    border: 6px solid #f3f3f3;
    border-top: 6px solid #3498db;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}

.loading-text {
    margin-top: 10px;
    font-size: 14px;
    color: #555;
}
    </style>
</head>
<body> 
    <div class="loader-container">
        <div class="loader"></div>
        <p class="loading-text">Wait for a moment...</p> 
    </div>
    <div class="container">
        <h1>NusaSekai Rest API</h1>
        <div class="description">
            <p>Welcome to NusaSekai Rest API. Some features may require an API key. You can verify the API key via the red key button if you haven't already.</p>
        </div>

        <button id="authorizeButton" class="button-logo unauthorized">
            <img id="authorizeLogo" src="https://telegra.ph/file/94853cac358c6421927c6.png" alt="Authorize">
        </button>

        <!-- Switch for Dark Mode -->
        <div class="checkbox-wrapper-35">
            <input value="private" name="switch" id="switch" type="checkbox" class="switch">
            <label for="switch">
                <span class="switch-x-text">Mode</span>
                <span class="switch-x-toggletext">
                    <span class="switch-x-unchecked"><span class="switch-x-hiddenlabel">Unchecked: </span>Light Mode</span>
                    <span class="switch-x-checked"><span class="switch-x-hiddenlabel">Checked: </span>Dark Mode</span>
                </span>
            </label>
        </div>

        <!-- Category: Fun -->
<div class="category">
    <h2>Fun</h2>

    <!-- Brat API Section -->
    <div class="api-box" id="bratApiBox">
        <h3>Brat API</h3>
        <div class="api-info">
            <div id="bratStatus" class="status"></div>
            <span>GET Method</span>
            <span>Endpoint: <a href="https://kislana.my.id/api/brat" target="_blank">/api/brat</a></span>
            <img src="https://telegra.ph/file/0407ec69b25991328bb86.png" alt="API Key Required" class="api-key-required">
        </div>
        <div class="api-section">
            <label for="bratInput">Text</label>
            <input type="text" id="bratInput" placeholder="Enter text to generate image...">
            <button id="bratButton" class="button-38">Generate Image</button>
        </div>
    </div>
</div>

        <!-- Category: Search -->
        <div class="category">
            <h2>Searching</h2>

            <!-- PlayStore Search Section -->
            <div class="api-box" id="playstoreApiBox">
                <h3>Search PlayStore</h3>
                <div class="api-info">
                    <div id="playstoreStatus" class="status"></div>
                    <span>GET Method</span>
                    <span>Endpoint: <a href="https://kislana.my.id/api/playstore" target="_blank">/api/playstore</a></span>
                    <img src="https://telegra.ph/file/0407ec69b25991328bb86.png" alt="API Key Required" class="api-key-required">
                </div>
                <div class="api-section">
                    <label for="playstoreInput">Search Term</label>
                    <input type="text" id="playstoreInput" placeholder="Enter search term...">
                    <button id="playstoreButton" class="button-38">Search</button>
                </div>
            </div>

            <!-- Pinterest Search Section -->
            <div class="api-box" id="searchApiBox">
                <h3>Search Pinterest</h3>
                <div class="api-info">
                    <div id="pinterestStatus" class="status"></div>
                    <span>GET Method</span>
                    <span>Endpoint: <a href="https://kislana.my.id/api/pinterest" target="_blank">/api/pinterest</a></span>
                    <img src="https://telegra.ph/file/0407ec69b25991328bb86.png" alt="API Key Required" class="api-key-required">
                </div>
                <div class="api-section">
                    <label for="searchInput">Search Term</label>
                    <input type="text" id="searchInput" placeholder="Enter search term...">
                    <button id="searchButton" class="button-38">Search</button>
                </div>
            </div>
        </div>

        <!-- Category: Api Utility -->
        <div class="category">
            <h2>Api Utility</h2>
            <div class="api-box" id="statusApiBox">
                <h3>Status Check</h3>
                <div class="api-info">
                    <div id="statusStatus" class="status"></div>
                    <span>GET Method</span>
                    <span>Endpoint: <a href="https://kislana.my.id/api/status" target="_blank">/api/status</a></span>
                </div>
                <div class="api-section">
                    <button id="statusButton" class="button-38">Check Status</button>
                </div>
            </div>
        </div>

        <!-- Result Section -->
        <div class="result" id="resultContainer">
            <h2>Result</h2>
            <pre id="resultOutput"></pre>
            <button id="copyButton" class="button-38">Copy Result</button>
        </div>
    </div>

    <!-- Popup for API Key Authorization -->
    <div id="popup" class="popup">
        <label for="apiKeyInput">Enter API Key:</label>
        <input type="text" id="apiKeyInput" placeholder="Enter API key...">
        <button id="saveApiKey" class="button-38">Authorize</button>
        <button id="cancelPopup" class="button-38">Cancel</button>
        <div id="apiKeyInfo">Current API Key: <span id="currentApiKey">None</span></div>
    </div>

<script>
    let apiKey = ''
    let activeApiBox = null

    // Show loading spinner
    function showLoader() {
        document.querySelector('.loader-container').classList.remove('hidden')
    }

    // Hide loading spinner
    function hideLoader() {
        document.querySelector('.loader-container').classList.add('hidden')
    }

    // Fetch data function with loader integration
    function fetchData(url, statusId) {
        showLoader()
        fetch(url)
            .then(response => {
                // Check if the response is an image by inspecting the content type
                const contentType = response.headers.get("content-type")
                if (contentType && contentType.includes("image")) {
                    // Display image directly if response is an image
                    return response.blob().then(blob => {
                        const imgURL = URL.createObjectURL(blob)
                        document.getElementById('resultOutput').innerHTML = `<img src="${imgURL}" alt="Generated Image" />`
                    })
                } else {
                    // Otherwise, treat response as JSON
                    return response.json().then(data => {
                        // Check if JSON contains an image URL
                        if (typeof data === 'object' && data.imageUrl) {
                            document.getElementById('resultOutput').innerHTML = `<img src="${data.imageUrl}" alt="Generated Image" />`
                        } else {
                            document.getElementById('resultOutput').textContent = JSON.stringify(data, null, 2)
                        }
                    })
                }
            })
            .then(() => {
                document.getElementById(statusId).style.backgroundColor = 'lightgreen'
            })
            .catch(error => {
                console.error('Error fetching data:', error)
                document.getElementById(statusId).style.backgroundColor = 'lightcoral'
                document.getElementById('resultOutput').textContent = 'Error fetching data.'
            })
            .finally(hideLoader) // Hide the loader after fetch completes
    }

    // Button event listeners
    document.getElementById('searchButton').addEventListener('click', function() {
        const query = document.getElementById('searchInput').value
        if (query.length > 2) {
            const url = apiKey 
                ? `https://kislana.my.id/api/pinterest?apikey=${apiKey}&text=${query}`
                : `https://kislana.my.id/api/pinterest?text=${query}`
            fetchData(url, 'pinterestStatus')
        } else {
            document.getElementById('resultOutput').textContent = 'Please enter a search term with at least 3 characters.'
        }
    })

    document.getElementById('playstoreButton').addEventListener('click', function() {
        const query = document.getElementById('playstoreInput').value
        if (query.length > 2) {
            const url = apiKey 
                ? `https://kislana.my.id/api/playstore?apikey=${apiKey}&search=${query}`
                : `https://kislana.my.id/api/playstore?search=${query}`
            fetchData(url, 'playstoreStatus')
        } else {
            document.getElementById('resultOutput').textContent = 'Please enter a search term with at least 3 characters.'
        }
    })

    document.getElementById('statusButton').addEventListener('click', function() {
        const url = apiKey 
            ? `https://kislana.my.id/api/status?apikey=${apiKey}`
            : `https://kislana.my.id/api/status`
        fetchData(url, 'statusStatus')
    })

    document.getElementById('authorizeButton').addEventListener('click', function() {
        document.getElementById('popup').style.display = 'block'
    })

    document.getElementById('saveApiKey').addEventListener('click', function() {
        apiKey = document.getElementById('apiKeyInput').value.trim()
        if (apiKey) {
            document.getElementById('popup').style.display = 'none'
            document.getElementById('authorizeButton').classList.remove('unauthorized')
            document.getElementById('authorizeButton').classList.add('authorized')
            document.getElementById('authorizeLogo').src = 'https://telegra.ph/file/6295af8a64d1fe55986f3.png'
            document.getElementById('currentApiKey').textContent = apiKey
        } else {
            document.getElementById('apiKeyInput').style.borderColor = '#d41212'
        }
    })

    document.getElementById('cancelPopup').addEventListener('click', function() {
        document.getElementById('popup').style.display = 'none'
    })

    // Handle interaction with API boxes
    document.querySelectorAll('.api-box').forEach(box => {
        box.addEventListener('click', function() {
            if (activeApiBox) {
                activeApiBox.classList.remove('active')
            }
            this.classList.add('active')
            activeApiBox = this
        })
    })

    // Dark mode toggle
    document.getElementById('switch').addEventListener('change', function() {
        document.body.classList.toggle('dark-mode', this.checked)
        document.querySelector('.container').classList.toggle('dark-mode', this.checked)
        document.querySelectorAll('.api-box').forEach(box => {
            box.classList.toggle('dark-mode', this.checked)
        })
        document.querySelectorAll('.popup').forEach(popup => {
            popup.classList.toggle('dark-mode', this.checked)
        })
        document.querySelectorAll('#apiKeyInfo').forEach(info => {
            info.classList.toggle('dark-mode', this.checked)
        })
        document.querySelectorAll('.description').forEach(desc => {
            desc.classList.toggle('dark-mode', this.checked)
        })
    })

    // Run hideLoader on page load after 3 seconds
    window.addEventListener('load', () => {
        setTimeout(hideLoader, 3000)
    })

    // Copy JSON result button
    const resultContainer = document.getElementById('resultContainer')
    const copyButton = document.createElement('button')
    copyButton.textContent = 'Copy JSON'
    copyButton.classList.add('button-38')
    resultContainer.appendChild(copyButton)

    copyButton.addEventListener('click', () => {
        const resultText = document.getElementById('resultOutput').textContent
        navigator.clipboard.writeText(resultText)
            .then(() => {
                alert('JSON copied to clipboard!')
            })
            .catch(err => {
                console.error('Error copying JSON:', err)
                alert('Failed to copy JSON.')
            })
    })
</script>
</body>